<div class="import-events-modal">
  <ml-message-bar ></ml-message-bar>
  <h3
    class="euiTitle"
    i18n-id="xpack.ml.settings.importEventsModal.importEventsTitle"
    i18n-default-message="Import events"
  ></h3>
  <div class="euiSpacer euiSpacer--s"></div>

  <div
    i18n-id="xpack.ml.settings.importEventsModal.importEventsFromICSFileDescription"
    i18n-default-message="Import events from an ICS file"
  ></div>
  <div class="euiSpacer euiSpacer--m"></div>

  <div class="import-events-container">

    <div class="kuiFormSection no-shadow euiPanel euiPanel--paddingMedium">
      <input
        type='file'
        ng-disabled="(loadingLock === true)"
        ml-file-input-on-change="fileNameChanged"
        />
    </div>

    <div
      ng-if="fileLoaded===true && newEvents.length >= 0"
      class="kuiFormSection">
      <span
        class="kuiFormLabel"
        i18n-id="xpack.ml.settings.importEventsModal.eventsToImportDescription"
        i18n-default-message="Events to import: {newEventsLength}"
        i18n-values="{ newEventsLength: newEvents.length }"
      ></span>
    </div>

    <div
      ng-if="error===true"
      class="kuiFormSection euiCallOut euiCallOut--danger">
      <div class="euiCallOutHeader">
        <span class="euiCallOutHeader__title">{{errorMessage}}</span>
      </div>
    </div>

    <div
      ng-if="loadingLock === true"
      class="kuiFormSection">
      <ml-loading-indicator
        label="{{ ::'xpack.ml.settings.importEventsModal.importingEventsLabel' | i18n: {defaultMessage: 'Importing events'} }}"
        is-loading="true"
        height="50"
      />
    </div>

    <div ng-show="fileLoaded===true && newEvents.length >= 0">
      <ml-events-list
        events='newEvents'
        show-controls='false'
        asterisk-text='RECURRING_WARNING'
        >
      </ml-events-list>

      <div class="euiSpacer euiSpacer--m"></div>

      <div ng-if="showRecurringWarning" class="recurring-warning">
        *{{RECURRING_WARNING}}
        <div class="euiSpacer euiSpacer--m"></div>
      </div>

      <div>
        <label class='kuiCheckBoxLabel kuiVerticalRhythm'>
          <input
            ng-model='includePastEvents'
            type="checkbox"
            class='kuiCheckBox'
            ng-click="createEventsList()"/>
          <span
            class='kuiCheckBoxLabel__text'
            i18n-id="xpack.ml.settings.importEventsModal.includePastEventsDescription"
            i18n-default-message="Include past events"
          ></span>
        </label>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>

  <hr class="euiHorizontalRule euiHorizontalRule--full euiHorizontalRule--marginMedium" />

  <button
    ng-click="save()"
    ng-disabled="loadingLock === true"
    class="kuiButton kuiButton--primary"
    i18n-id="xpack.ml.settings.importEventsModal.importButtonLabel"
    i18n-default-message="Import"
  ></button>
  <button
    ng-click="cancel()"
    ng-disabled="loadingLock === true"
    class="kuiButton kuiButton--primary"
    aria-label="Cancel"
    i18n-id="xpack.ml.settings.importEventsModal.cancelButtonLabel"
    i18n-default-message="Cancel"
  ></button>

</div>
